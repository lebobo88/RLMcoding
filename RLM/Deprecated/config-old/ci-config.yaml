name: RLM CI/CD Configuration

ci:
  enabled: true
  platform: github-actions
  trigger:
    - push
    - pull_request
  branches:
    - main
    - develop

pipelines:
  build:
    name: Build and Test
    steps:
      - checkout
      - setup_environment
      - install_dependencies
      - rlm_sync_pull
      - rlm_build
      - rlm_test
      - code_quality_check
      - rlm_report
      - rlm_sync_push
    
    environment:
      node_version: "18"
      python_version: "3.11"
      
    cache:
      - node_modules
      - .npm
      - ~/.cache/pip

  deploy:
    name: Deploy
    needs: build
    steps:
      - checkout
      - setup_environment
      - rlm_deploy
    
    environments:
      - staging
      - production
    
    approval:
      staging: false
      production: true

testing:
  parallel: true
  coverage_threshold: 80
  fail_fast: false
  retry: 2
  
  suites:
    - unit
    - integration
    - e2e
  
  reporters:
    - console
    - html
    - json
    - junit

quality:
  linting: true
  type_checking: true
  security_scan: true
  dependency_audit: true
  
  tools:
    linter: eslint
    formatter: prettier
    security: snyk
    coverage: jest

notifications:
  on_success:
    - slack
    - email
  
  on_failure:
    - slack
    - email
    - github_issue
  
  channels:
    slack: ""
    email: ""

artifacts:
  retention_days: 30
  paths:
    - coverage/
    - test-reports/
    - RLM/progress/reports/
    - build/

secrets:
  required:
    - RLM_GITHUB_TOKEN
    - RLM_AI_API_KEY
  optional:
    - SLACK_WEBHOOK
    - EMAIL_SMTP_PASSWORD

